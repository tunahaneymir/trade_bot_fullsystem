ğŸ“Š PARÃ‡A 3: PA ADAPTIVE & RE-ENTRY
ğŸ”„ 1. RE-ENTRY SYSTEM
1.1 Re-entry Nedir?
TanÄ±m: Stop loss sonrasÄ± aynÄ± zone'da yeni bir deneme yapma
AmaÃ§:
BazÄ± zone'lar ilk denemede false breakout verir
Ama ikinci denemede gÃ¼Ã§lÃ¼ bounce olur
â†’ Ä°kinci ÅŸansÄ± deÄŸerlendir
Felsefe:
âŒ KÃ¶tÃ¼: "Stop oldu, bu zone kÃ¶tÃ¼, bÄ±rak!"
âœ“ Ä°yi: "Stop oldu, zone hala geÃ§erli mi kontrol et"

RL Ã–ÄŸrenecek:
- Hangi zone'larda 2. deneme iÅŸe yarÄ±yor?
- Hangi coinlerde re-entry baÅŸarÄ±lÄ±?
- Hangi market koÅŸullarÄ±nda skip et?
1.2 Re-entry Configuration
RE_ENTRY_CONFIG = {
    'enabled': True,
    'wait_candles': 2,          # 2 mum bekle (30 dk @ 15M)
    'risk_reduction': 0.5,      # YarÄ± risk (%1 instead of %2)
    'max_attempts': 2,          # Maximum 2 deneme per zone
    'require_new_choch': True,  # Yeni ChoCH ÅŸart
    'require_new_fib': True     # Yeni Fib retest ÅŸart
}

# AÃ§Ä±klama:
"""
wait_candles: 2
â†’ Stop sonrasÄ± hemen girme
â†’ 2 mum (30 dk) bekle
â†’ PiyasanÄ±n ne yapacaÄŸÄ±nÄ± gÃ¶r

risk_reduction: 0.5
â†’ Ä°lk trade: %2 risk
â†’ Re-entry: %1 risk (yarÄ±)
â†’ Daha dikkatli ol

max_attempts: 2
â†’ Ä°lk trade + 2 re-entry = Max 3 deneme
â†’ 3 kez de stop â†’ Zone iptal

require_new_choch: True
â†’ Eski ChoCH yetmez
â†’ Yeni bir ChoCH oluÅŸmalÄ±
â†’ Fresh signal gerekli

require_new_fib: True
â†’ Fiyat tekrar zone'a gelmeli
â†’ Yeni Fibonacci retest yapmalÄ±
â†’ Setup yeniden oluÅŸmalÄ±
"""
1.3 Re-entry Conditions (KoÅŸullar)
def check_re_entry_eligibility(zone, last_trade):
    """
    Re-entry yapÄ±labilir mi?
    """
    
    conditions = {}
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 1. Son trade stop loss mu?
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if last_trade.result != "STOP_LOSS":
        return {
            'eligible': False,
            'reason': 'Last trade was not stopped'
        }
    conditions['stopped'] = True
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 2. Yeterli zaman geÃ§ti mi?
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    candles_passed = count_candles_since(last_trade.exit_time)
    
    if candles_passed < 2:  # 2 mum = 30 dk @ 15M
        return {
            'eligible': False,
            'reason': f'Wait {2 - candles_passed} more candles'
        }
    conditions['time_passed'] = True
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 3. Zone hala geÃ§erli mi?
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Zone hard break olmadÄ± mÄ±?
    if zone.broken:
        return {
            'eligible': False,
            'reason': 'Zone invalidated (broken)'
        }
    
    # Zone body close ile kÄ±rÄ±lmadÄ± mÄ±?
    last_candle_close = get_last_candle_close()
    
    if last_trade.direction == "LONG":
        # LONG iÃ§in zone altÄ±nda close olmamalÄ±
        if last_candle_close < zone.bottom:
            return {
                'eligible': False,
                'reason': 'Zone broken below'
            }
    else:  # SHORT
        # SHORT iÃ§in zone Ã¼stÃ¼nde close olmamalÄ±
        if last_candle_close > zone.top:
            return {
                'eligible': False,
                'reason': 'Zone broken above'
            }
    
    conditions['zone_valid'] = True
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 4. Yeni ChoCH oluÅŸtu mu?
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    new_choch = detect_choch_since(last_trade.exit_time)
    
    if not new_choch.detected:
        return {
            'eligible': False,
            'reason': 'No new ChoCH formed'
        }
    
    if new_choch.strength < 0.4:
        return {
            'eligible': False,
            'reason': 'New ChoCH too weak'
        }
    
    conditions['new_choch'] = True
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 5. Yeni Fibonacci retest var mÄ±?
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    fib_levels = calculate_fibonacci(new_choch)
    current_price = get_current_price()
    
    fib_touched = check_fib_retest(
        current_price, 
        fib_levels, 
        last_trade.direction
    )
    
    if not fib_touched:
        return {
            'eligible': False,
            'reason': 'Waiting for Fib retest'
        }
    
    conditions['fib_retest'] = True
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 6. Max attempt limit aÅŸÄ±lmadÄ± mÄ±?
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    attempts = count_attempts_on_zone(zone)
    
    if attempts >= 2:  # Max 2 re-entry
        return {
            'eligible': False,
            'reason': 'Max attempts reached (2)'
        }
    
    conditions['attempts_ok'] = True
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # TÃœM KOÅULLAR SAÄLANDI!
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    return {
        'eligible': True,
        'conditions': conditions,
        'risk_reduction': 0.5,  # YarÄ± risk
        'message': 'Re-entry approved with reduced risk'
    }
1.4 Re-entry Scenarios
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SENARYO 1: BAÅARILI RE-ENTRY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

10:00 - Ä°lk Trade
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Zone: $50,000 - $50,100 (Quality 8)
ChoCH: Confirmed, strength 0.7
Entry: $50,050 (Fib 0.705)
Stop: $49,750
Risk: %2

10:30 - Stop Loss Hit
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Price: $49,750
Result: LOSS -2%
Zone Status: Wick touched zone, no body close below
Action: Zone hala geÃ§erli âœ“

11:00 - Bekleme (2 mum)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Candle 1 (10:45): Price $49,850, choppy
Candle 2 (11:00): Price $49,900, consolidating
Wait complete âœ“

11:15 - Yeni Setup KontrolÃ¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Yeni ChoCH?
â”œâ”€ Price broke above last LH ($50,000)
â”œâ”€ Close: $50,180
â”œâ”€ Strength: 0.65
â””â”€ NEW ChoCH CONFIRMED âœ“

Fibonacci?
â”œâ”€ New swing low: $49,750
â”œâ”€ New swing high: $50,180
â”œâ”€ Fib 0.705: $50,053
â”œâ”€ Current price: $50,055
â””â”€ FIB RETEST TOUCHED âœ“

Zone?
â”œâ”€ Zone not broken (no body close below)
â”œâ”€ Still valid
â””â”€ ZONE VALID âœ“

Attempts?
â”œâ”€ First attempt: Stopped
â”œâ”€ This is 2nd attempt (1st re-entry)
â””â”€ ATTEMPTS OK âœ“

11:15 - Re-entry Approved!
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Entry: $50,053 (Fib 0.705)
Stop: $49,750
Risk: %1 (reduced from %2)
Position: Half size

12:30 - TP1 Hit! ğŸ¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TP1: $50,507
Close 50%
Profit: +0.9% (half position)

14:00 - TP2 Hit! ğŸ¯ğŸ¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TP2: $51,000
Close 30%
Total Profit: +1.8%

Result: RE-ENTRY SUCCESSFUL! âœ“
Lesson: Zone was valid, 2nd attempt worked
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SENARYO 2: RE-ENTRY REDDEDÄ°LDÄ° (Zone Broken)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

10:00 - Ä°lk Trade
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Zone: $50,000 - $50,100
Entry: $50,050
Stop: $49,750

10:30 - Stop Loss Hit
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Price: $49,750
Result: LOSS

10:45 - Zone Check
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Candle close: $49,600 âœ—
â†’ Body closed BELOW zone bottom ($50,000)
â†’ Zone BROKEN! âœ—

Action: ZONE INVALIDATED
Re-entry: NOT ALLOWED
Reason: "Zone broken, not valid anymore"

Result: No re-entry, zone blacklisted
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SENARYO 3: MAX ATTEMPTS REACHED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

10:00 - Trade #1 (First attempt)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Entry: $50,050
Result: STOP at $49,750 (-2%)

11:00 - Trade #2 (1st re-entry)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
New ChoCH: âœ“
New Fib: âœ“
Entry: $50,045
Risk: %1 (reduced)
Result: STOP at $49,750 (-1%)

12:00 - Trade #3 (2nd re-entry)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
New ChoCH: âœ“
New Fib: âœ“
Entry: $50,060
Risk: %1 (reduced)
Result: STOP at $49,750 (-1%)

Total Loss: -4% (3 attempts)

13:00 - Potential Trade #4?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup appears again...
Attempts: 3 (max 2 allowed)

Action: ZONE BLACKLISTED âœ—
Re-entry: NOT ALLOWED
Reason: "Max 2 re-entries reached"
Message: "This zone is not working, move on"

Result: Zone invalidated for future trades
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1.5 RL Learning on Re-entries
RL_RE_ENTRY_LEARNING = {
    'data_collection': {
        'track': [
            'Zone quality vs re-entry success',
            'ChoCH strength vs re-entry success',
            'Time between attempts',
            'Market volatility impact',
            'Coin-specific patterns'
        ],
        
        'questions': [
            'Hangi zone quality re-entry iÃ§in iyi?',
            'Re-entry zamanlamasÄ± Ã¶nemli mi?',
            '1. vs 2. re-entry hangisi daha iyi?',
            'Hangi coinlerde re-entry iÅŸe yarÄ±yor?'
        ]
    },
    
    'learning_outcomes': {
        'example_1': {
            'finding': 'Zone quality 8+ â†’ Re-entry 70% win',
            'action': 'Zone 8+ iÃ§in re-entry tercih et',
            'adjustment': 'Low quality zone re-entry skip'
        },
        
        'example_2': {
            'finding': 'BTC re-entry %65 win, SOL %45 win',
            'action': 'BTC re-entry al, SOL skip',
            'adjustment': 'Coin-specific re-entry rules'
        },
        
        'example_3': {
            'finding': 'Ä°lk stop sonrasÄ± 1h > 30m daha iyi',
            'action': 'Wait time 2 mum â†’ 4 mum',
            'adjustment': 'Dynamic wait time learning'
        }
    },
    
    'blacklist_learning': {
        'pattern': 'Zone X sÃ¼rekli 2. denemede de kaybettiriyor',
        'action': 'Zone X blacklist',
        'future': 'Similar zone pattern detect â†’ Skip re-entry'
    }
}

âš™ï¸ 2. ADAPTIVE PARAMETERS
2.1 Neden Adaptive?
Problem:
Statik parametreler:
â”œâ”€ BTC volatil â†’ Depth 12 dar olabilir
â”œâ”€ Stablecoin sakin â†’ Depth 12 geniÅŸ olabilir
â”œâ”€ Her coin farklÄ± karakterde
â””â”€ Her timeframe farklÄ± ihtiyaÃ§
Ã‡Ã¶zÃ¼m:
Adaptive parametreler:
â”œâ”€ Volatiliteye gÃ¶re ayarla
â”œâ”€ Coin karakterine gÃ¶re optimize et
â”œâ”€ Timeframe'e gÃ¶re scale et
â””â”€ RL zamanla optimal deÄŸerleri Ã¶ÄŸrensin
2.2 Base Parameters
BASE_PARAMS = {
    'zigzag_depth': 12,
    'zigzag_deviation': 5,
    'zigzag_backstep': 2,  # Sabit (deÄŸiÅŸmez)
    'swing_strength': 5
}

# Bu deÄŸerler baÅŸlangÄ±Ã§ noktasÄ±
# Volatilite ve timeframe'e gÃ¶re Ã§arpÄ±lacak
2.3 Adaptive Calculation
def adaptive_parameters(coin, timeframe, atr_percent):
    """
    Volatiliteye gÃ¶re parametreleri ayarla
    
    Parameters:
    - coin: 'BTCUSDT'
    - timeframe: '4h', '1h', '15m'
    - atr_percent: Current ATR as % of price
    """
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 1. ATR-Based Multiplier
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Volatility ne kadar yÃ¼ksek?
    
    if atr_percent > 8.0:
        atr_mult = 1.5  # Ã‡ok volatil (SOL gibi)
    elif atr_percent > 5.0:
        atr_mult = 1.2  # Orta-yÃ¼ksek (BTC gibi)
    elif atr_percent > 3.0:
        atr_mult = 1.0  # Normal
    else:
        atr_mult = 0.8  # DÃ¼ÅŸÃ¼k volatilite (stablecoin)
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 2. Timeframe Multiplier
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Timeframe'e gÃ¶re scale
    
    tf_multipliers = {
        '4h': 1.5,   # Daha geniÅŸ bakÄ±ÅŸ
        '1h': 1.0,   # Normal
        '15m': 0.7   # Daha dar bakÄ±ÅŸ
    }
    tf_mult = tf_multipliers.get(timeframe, 1.0)
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 3. Final Parameters
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    params = {
        'zigzag_depth': int(
            BASE_PARAMS['zigzag_depth'] * atr_mult * tf_mult
        ),
        'zigzag_deviation': int(
            BASE_PARAMS['zigzag_deviation'] * atr_mult
        ),
        'zigzag_backstep': BASE_PARAMS['zigzag_backstep'],  # Sabit
        'swing_strength': int(
            BASE_PARAMS['swing_strength'] * atr_mult
        )
    }
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 4. Apply Limits (AÅŸÄ±rÄ±lÄ±klarÄ± Ã¶nle)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    params['zigzag_depth'] = max(5, min(30, params['zigzag_depth']))
    params['zigzag_deviation'] = max(2, min(15, params['zigzag_deviation']))
    params['swing_strength'] = max(3, min(15, params['swing_strength']))
    
    return params
2.4 Adaptive Examples
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ã–RNEK 1: BTC (Normal Volatility)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Coin: BTCUSDT
Timeframe: 1H
ATR: 5.2%

Calculation:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ATR Multiplier:
â”œâ”€ ATR 5.2% â†’ atr_mult = 1.2 (orta-yÃ¼ksek)

Timeframe Multiplier:
â”œâ”€ 1H â†’ tf_mult = 1.0 (normal)

Parameters:
â”œâ”€ Depth: 12 * 1.2 * 1.0 = 14.4 â†’ 14
â”œâ”€ Deviation: 5 * 1.2 = 6
â”œâ”€ Swing: 5 * 1.2 = 6
â””â”€ Backstep: 2 (sabit)

Final:
â”œâ”€ ZigZag Depth: 14
â”œâ”€ ZigZag Deviation: 6
â”œâ”€ Swing Strength: 6
â””â”€ Backstep: 2

Result: Biraz daha geniÅŸ parametreler (volatilite orta)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ã–RNEK 2: SOL (High Volatility, 15M)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Coin: SOLUSDT
Timeframe: 15M
ATR: 11.5%

Calculation:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ATR Multiplier:
â”œâ”€ ATR 11.5% â†’ atr_mult = 1.5 (Ã§ok volatil)

Timeframe Multiplier:
â”œâ”€ 15M â†’ tf_mult = 0.7 (dar bakÄ±ÅŸ)

Parameters:
â”œâ”€ Depth: 12 * 1.5 * 0.7 = 12.6 â†’ 13
â”œâ”€ Deviation: 5 * 1.5 = 7.5 â†’ 8
â”œâ”€ Swing: 5 * 1.5 = 7.5 â†’ 8
â””â”€ Backstep: 2

Final:
â”œâ”€ ZigZag Depth: 13
â”œâ”€ ZigZag Deviation: 8
â”œâ”€ Swing Strength: 8
â””â”€ Backstep: 2

Result: GeniÅŸ parametreler ama 15M iÃ§in optimize
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ã–RNEK 3: Stablecoin (Low Volatility, 4H)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Coin: USDCUSDT (Ã¶rnek)
Timeframe: 4H
ATR: 0.8%

Calculation:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ATR Multiplier:
â”œâ”€ ATR 0.8% â†’ atr_mult = 0.8 (dÃ¼ÅŸÃ¼k volatilite)

Timeframe Multiplier:
â”œâ”€ 4H â†’ tf_mult = 1.5 (geniÅŸ bakÄ±ÅŸ)

Parameters:
â”œâ”€ Depth: 12 * 0.8 * 1.5 = 14.4 â†’ 14
â”œâ”€ Deviation: 5 * 0.8 = 4
â”œâ”€ Swing: 5 * 0.8 = 4
â””â”€ Backstep: 2

Final:
â”œâ”€ ZigZag Depth: 14
â”œâ”€ ZigZag Deviation: 4
â”œâ”€ Swing Strength: 4
â””â”€ Backstep: 2

Result: Dar deviation (kÃ¼Ã§Ã¼k hareketleri yakala)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2.5 RL Parameter Optimization
RL_PARAMETER_LEARNING = {
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Phase 1: Volatility-Based (0-2 ay)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    'phase_1': {
        'method': 'Heuristic (volatility-based)',
        'duration': '0-2 months',
        'approach': 'Use adaptive formula above',
        'goal': 'Quick start, decent results'
    },
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Phase 2: Grid Search (2-6 ay)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    'phase_2': {
        'method': 'Grid search optimization',
        'duration': '2-6 months',
        'approach': '''
        Her coin + timeframe iÃ§in:
        - Test depth: [8, 10, 12, 15, 18, 20]
        - Test deviation: [3, 5, 7, 10]
        - Test strength: [3, 5, 7, 10]
        
        Hangi kombinasyon en iyi zone'lar buluyor?
        - Zone quality ortalama nedir?
        - Win rate nedir?
        - False signal oranÄ±?
        
        En iyi kombinasyonu kaydet
        ''',
        'frequency': 'HaftalÄ±k optimization',
        'goal': 'Coin-specific optimal parameters'
    },
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Phase 3: RL Optimization (6+ ay)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    'phase_3': {
        'method': 'Full RL learning',
        'duration': '6+ months',
        'approach': '''
        RL parametreleri de Ã¶ÄŸrensin:
        
        State:
        - Current volatility
        - Market regime
        - Recent zone performance
        - Coin characteristics
        
        Action:
        - Adjust depth Â±2
        - Adjust deviation Â±1
        - Adjust strength Â±1
        
        Reward:
        - Zone quality improved: +20
        - Win rate increased: +50
        - False signals reduced: +30
        
        RL sÃ¼rekli optimize eder
        ''',
        'goal': 'Self-optimizing parameters'
    },
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Learning Example
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    'example_learning': {
        'coin': 'BTCUSDT',
        'timeframe': '1H',
        
        'initial': {
            'depth': 12,
            'deviation': 5,
            'zone_quality_avg': 6.2,
            'win_rate': 0.58
        },
        
        'after_6_months': {
            'depth': 15,  # RL learned: deeper better
            'deviation': 6,  # RL learned: slightly higher
            'zone_quality_avg': 7.1,  # Improved!
            'win_rate': 0.64,  # Improved!
            'reason': 'BTC needs wider view for quality zones'
        }
    }
}

ğŸ’§ 3. LIQUIDITY DETECTION
3.1 Liquidity Nedir?
TanÄ±m: Stop loss kÃ¼meleri, wick seviyeleri, institutional seviyeler
Basit AÃ§Ä±klama:
Fiyat bir seviyeye gelir:
â”œâ”€ Wick o seviyeyi sweep eder
â”œâ”€ Ama body close o seviyeyi geÃ§mez
â””â”€ = Liquidity temizlendi

SonuÃ§: O seviye artÄ±k destek/direnÃ§ olabilir
3.2 Liquidity Temizlenme
def is_liquidity_cleaned(level, direction, candles_after):
    """
    Bir seviyedeki liquidity temizlendi mi?
    
    Parameters:
    - level: Price level (Ã¶rn: $50,000)
    - direction: 'LONG' or 'SHORT'
    - candles_after: Level oluÅŸtuktan sonraki mumlar
    """
    
    for candle in candles_after:
        
        if direction == "LONG":
            # LONG iÃ§in: Support seviyesi
            # Liquidity altÄ±ndaki stop loss'lar
            
            # Wick seviyeyi sweep etti mi?
            if candle.low <= level:
                # Body close seviyenin ÃœSTÃœNDE mi?
                if candle.close > level:
                    return {
                        'cleaned': True,
                        'candle': candle,
                        'reason': 'Wick swept level, body held above'
                    }
        
        elif direction == "SHORT":
            # SHORT iÃ§in: Resistance seviyesi
            # Liquidity Ã¼stÃ¼ndeki stop loss'lar
            
            # Wick seviyeyi sweep etti mi?
            if candle.high >= level:
                # Body close seviyenin ALTINDA mi?
                if candle.close < level:
                    return {
                        'cleaned': True,
                        'candle': candle,
                        'reason': 'Wick swept level, body held below'
                    }
    
    return {'cleaned': False}
3.3 Liquidity KullanÄ±mÄ± (TP2 iÃ§in)
def find_next_liquidity_for_tp2(entry, direction, recent_candles):
    """
    TP2 iÃ§in en yakÄ±n liquidity seviyesini bul
    """
    
    liquidity_levels = []
    
    # Son 50 mumdaki tÃ¼m wick'leri tara
    for candle in recent_candles:
        
        if direction == "LONG":
            # Ãœstteki resistance wick'ler (TP hedefi)
            if candle.high > entry:
                # Wick var ama body close altÄ±nda kalmÄ±ÅŸ
                if candle.close < candle.high - (candle.high - candle.low) * 0.3:
                    liquidity_levels.append({
                        'price': candle.high,
                        'type': 'resistance_wick',
                        'strength': calculate_wick_strength(candle)
                    })
        
        elif direction == "SHORT":
            # Alttaki support wick'ler (TP hedefi)
            if candle.low < entry:
                # Wick var ama body close Ã¼stte kalmÄ±ÅŸ
                if candle.close > candle.low + (candle.high - candle.low) * 0.3:
                    liquidity_levels.append({
                        'price': candle.low,
                        'type': 'support_wick',
                        'strength': calculate_wick_strength(candle)
                    })
    
    # En yakÄ±n ve en gÃ¼Ã§lÃ¼ liquidity'yi seÃ§
    if liquidity_levels:
        # Entry'e yakÄ±nlÄ±k ve wick gÃ¼cÃ¼ne gÃ¶re sÄ±rala
        best_liquidity = max(
            liquidity_levels,
            key=lambda x: x['strength'] / abs(x['price'] - entry)
        )
        return best_liquidity['price']
    
    return None
3.4 Liquidity Example
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LIQUIDITY SWEEP Ã–RNEK (LONG)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Zone: $50,000 - $50,100
Entry: $50,050

TP2 Belirleme:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Recent candle analysis:

Candle 1 (2 gÃ¼n Ã¶nce):
â”œâ”€ Open: $50,800
â”œâ”€ High: $51,200 â† Wick yukarÄ±!
â”œâ”€ Low: $50,750
â”œâ”€ Close: $50,850
â””â”€ Analysis: Wick swept $51,200 ama body $50,850'de kaldÄ±
   â†’ LIQUIDITY LEVEL: $51,200 âœ“

Candle 2 (3 gÃ¼n Ã¶nce):
â”œâ”€ Open: $51,500
â”œâ”€ High: $51,900 â† Daha yÃ¼ksek wick!
â”œâ”€ Low: $51,400
â”œâ”€ Close: $51,550
â””â”€ Analysis: Wick swept $51,900 ama body $51,550'de kaldÄ±
   â†’ LIQUIDITY LEVEL: $51,900 âœ“

Zone Detection:
â”œâ”€ Next zone found: $52,000 - $52,100

TP2 Decision:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Options:
1. Liquidity $51,200 (yakÄ±n, gÃ¼Ã§lÃ¼ wick)
2. Liquidity $51,900 (uzak, daha gÃ¼Ã§lÃ¼)
3. Zone $52,000 (en uzak)

Selection Logic:
â”œâ”€ $51,200: RR 2.0 (iyi)
â”œâ”€ $51,900: RR 3.1 (mÃ¼kemmel!)
â””â”€ $52,000: RR 3.3 (Ã§ok uzak, riskli)

SELECTED TP2: $51,900
Reason: En iyi RR + GÃ¼Ã§lÃ¼ liquidity level

GÃ¶rsel:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$52,000 â”€â”€â”€â”€â”€  Zone (alternatif)
         â”‚
$51,900 â•â•â•â•â•  LIQUIDITY (TP2 SEÃ‡Ä°LDÄ°) â­
         â”‚     Wick swept, body held below
         â”‚
$51,200 â”€â”€â”€â”€â”€  Liquidity (daha yakÄ±n)
         â”‚
$50,050 â•â•â•â•â•  ENTRY
         â”‚
$50,000 â”€â”€â”€â”€â”€  Zone

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”„ 4. COMPLETE PA TRADE FLOW
4.1 Full Step-by-Step Process
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COMPLETE PA TRADING PROCESS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: TREND CHECK (4H)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Timeframe: 4H
Action: Calculate EMA 20 & EMA 50

Decision Tree:
â”œâ”€ Price > EMA20 > EMA50? 
â”‚  â””â”€ YES â†’ UPTREND â†’ Look for LONG
â”‚  â””â”€ NO â†’ Check downtrend
â”‚
â”œâ”€ Price < EMA20 < EMA50?
â”‚  â””â”€ YES â†’ DOWNTREND â†’ Look for SHORT
â”‚  â””â”€ NO â†’ Check sideways
â”‚
â””â”€ Sideways conditions met (2 out of 3)?
   â””â”€ YES â†’ SIDEWAYS â†’ Skip this coin
   â””â”€ NO â†’ Re-check trend

Output: TREND CONFIRMED â†’ Continue to Step 2
        SIDEWAYS â†’ Skip to next coin

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 2: ZONE DETECTION (1H/4H)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Timeframe: 1H or 4H
Action: Run ZigZag++ and Swing detection

Process:
1. Get adaptive parameters
   â”œâ”€ Calculate ATR%
   â”œâ”€ Apply volatility multiplier
   â””â”€ Apply timeframe multiplier

2. Run ZigZag++
   â”œâ”€ Depth: Adaptive
   â”œâ”€ Deviation: Adaptive
   â”œâ”€ Backstep: 2 (fixed)
   â””â”€ Lookback: 600 candles (1H)

3. Identify Swing Points
   â”œâ”€ Strength: Adaptive
   â”œâ”€ Validate ZigZag points
   â””â”€ Confirm swing highs/lows

4. Create Zones
   â”œâ”€ Group swing points
   â”œâ”€ Min 2 touches
   â”œâ”€ Max 1.5% thickness
   â””â”€ Merge overlapping zones

5. Calculate Zone Quality (0-10)
   â”œâ”€ Touch count: 0-4 points
   â”œâ”€ Thickness: 0-3 points
   â”œâ”€ Recency: 0-3 points
   â””â”€ Total score

6. Filter Zones
   â””â”€ Keep only Quality >= 4

Output: VALID ZONES LIST â†’ Continue to Step 3
        NO VALID ZONES â†’ Skip to next coin

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 3: PRICE MONITORING (1H/15M)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Action: Monitor if price approaching any zone

Monitoring:
â”œâ”€ Current price: $X
â”œâ”€ Nearest zone: $Y - $Z
â”œâ”€ Distance: Calculate
â”‚
â””â”€ If distance < 2%:
   â””â”€ Switch to 15M for entry timing

Output: PRICE IN ZONE â†’ Continue to Step 4
        PRICE FAR â†’ Continue monitoring

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 4: ChoCH DETECTION (15M)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Timeframe: 15M (precise timing)
Action: Watch for market structure break

For LONG (in support zone):
1. Identify last Lower High (LH)
2. Monitor new candles
3. Wait for close ABOVE LH
4. Calculate ChoCH strength
5. Check minimum strength (0.4)

For SHORT (in resistance zone):
1. Identify last Higher Low (HL)
2. Monitor new candles
3. Wait for close BELOW HL
4. Calculate ChoCH strength
5. Check minimum strength (0.4)

ChoCH Strength Formula:
â”œâ”€ Body distance score (40%)
â”œâ”€ Volume confirmation (60%)
â””â”€ Total: 0.0 - 1.0

Output: ChoCH CONFIRMED (strength >= 0.4) â†’ Continue to Step 5
        ChoCH WEAK â†’ Wait for better signal
        NO ChoCH â†’ Continue monitoring

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 5: FIBONACCI RETRACEMENT (15M)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Action: Calculate and monitor Fib levels

Calculation:
For LONG:
â”œâ”€ Swing Low: Last low before ChoCH
â”œâ”€ Swing High: ChoCH breakout high
â”œâ”€ Fib 0.705: swing_low + range * 0.295
â””â”€ Fib 0.618: swing_low + range * 0.382

For SHORT:
â”œâ”€ Swing High: Last high before ChoCH
â”œâ”€ Swing Low: ChoCH breakout low
â”œâ”€ Fib 0.705: swing_high - range * 0.295
â””â”€ Fib 0.618: swing_high - range * 0.382

Monitoring:
1. Price retracing toward zone
2. Check if touches 0.705 â†’ ENTRY SIGNAL!
3. If skips 0.705, check 0.618 â†’ ENTRY SIGNAL!
4. If skips both â†’ SETUP CANCELED

Output: FIB RETEST (0.705 or 0.618) â†’ Continue to Step 6
        MISSED BOTH LEVELS â†’ Cancel setup
        WAITING â†’ Monitor

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 6: GATE SYSTEM CHECK (See Part 4)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Gate 1: Mandatory Requirements
â”œâ”€ Zone exists: âœ“/âœ—
â”œâ”€ ChoCH confirmed: âœ“/âœ—
â”œâ”€ Fib retest: âœ“/âœ—
â”œâ”€ Trend aligned: âœ“/âœ—
â”œâ”€ Stop loss valid: âœ“/âœ—
â””â”€ RR >= 1.5: âœ“/âœ—

Gate 2: Quality Score >= 40
â”œâ”€ Calculate setup quality (0-100)
â”œâ”€ Zone quality weight
â”œâ”€ ChoCH strength weight
â”œâ”€ Volume weight
â”œâ”€ Market conditions weight
â””â”€ Total score

Gate 3: Risk Limits OK
â”œâ”€ Daily risk < 6%: âœ“/âœ—
â”œâ”€ Coin cooldown expired: âœ“/âœ—
â”œâ”€ Total open risk < 8%: âœ“/âœ—
â”œâ”€ Position size valid: âœ“/âœ—
â””â”€ Correlation check: âœ“/âœ—

Gate 4: Psychological Checks
â”œâ”€ Not in cooldown: âœ“/âœ—
â”œâ”€ Not FOMO: âœ“/âœ—
â”œâ”€ Not revenge: âœ“/âœ—
â”œâ”€ Not overtrading: âœ“/âœ—
â””â”€ Emotional state OK: âœ“/âœ—

Output: ALL GATES PASSED â†’ Continue to Step 7
        ANY GATE FAILED â†’ REJECT TRADE

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 7: RL DECISION (See Part 4)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Action: RL evaluates if trade should be taken

State Evaluation:
â”œâ”€ Setup quality score
â”œâ”€ Recent performance
â”œâ”€ Pattern history
â”œâ”€ Market context
â”œâ”€ Confidence level
â””â”€ Risk assessment

RL Action Options:
1. ENTER_FULL (2% risk)
2. ENTER_REDUCED (1% risk)
3. SKIP (wait for better setup)
4. WAIT (conditions not optimal yet)

Output: ENTER â†’ Continue to Step 8
        SKIP â†’ Wait for next setup

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 8: TRADE EXECUTION (Agent 3)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Action: Calculate position size and place order

Calculations:
1. Stop Loss
   â”œâ”€ Last swing wick
   â””â”€ + 0.5% buffer

2. Risk Amount
   â”œâ”€ Account balance * Risk%
   â””â”€ Adjusted for setup quality

3. Position Size
   â”œâ”€ Risk amount / (Entry - Stop)
   â””â”€ In coins/contracts

4. Take Profits
   â”œâ”€ TP1 (50%): RR 1.5
   â”œâ”€ TP2 (30%): Liquidity/Zone
   â””â”€ TP3 (20%): Dynamic (ChoCH)

Order Placement:
â”œâ”€ Market/Limit order @ Entry
â”œâ”€ Stop Loss order @ Stop
â”œâ”€ TP1 Limit @ TP1 price
â””â”€ TP2 Limit @ TP2 price

Output: TRADE EXECUTED â†’ Continue to Step 9

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 9: TRADE MANAGEMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Active Monitoring:

TP1 Hit (50%):
â”œâ”€ Close 50% position
â”œâ”€ Lock in profit
â”œâ”€ Move SL to breakeven
â””â”€ Risk eliminated âœ“

TP2 Hit (30%):
â”œâ”€ Close 30% position
â”œâ”€ Trail stop loss
â”œâ”€ Lock in additional profit
â””â”€ Let final 20% run

TP3 Monitoring (20%):
â”œâ”€ Watch for opposite ChoCH
â”œâ”€ Trail stop aggressively
â”œâ”€ Exit when ChoCH detected
â””â”€ Or trailing stop hit

Stop Loss Hit:
â”œâ”€ Close entire position
â”œâ”€ Record loss
â”œâ”€ Check re-entry eligibility
â””â”€ Apply cooldown if needed

Output: TRADE COMPLETED â†’ Continue to Step 10

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 10: POST-TRADE ANALYSIS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Action: Update RL model and records

Data Collection:
â”œâ”€ Entry price, exit price(s)
â”œâ”€ PnL (profit/loss)
â”œâ”€ Setup quality score
â”œâ”€ Zone quality
â”œâ”€ ChoCH strength
â”œâ”€ Market conditions
â”œâ”€ Time in trade
â””â”€ Exit reason

Outcome Score Calculation (-200 to +200):
â”œâ”€ Base reward (win/loss)
â”œâ”€ Setup quality bonus
â”œâ”€ Risk management bonus
â”œâ”€ Special penalties (FOMO, revenge)
â””â”€ Total outcome score

RL Model Update:
â”œâ”€ Store experience in buffer
â”œâ”€ Update zone memory
â”œâ”€ Adjust thresholds if needed
â””â”€ Learn from outcome

Cooldown Application (if needed):
â”œâ”€ Loss â†’ 15-45 min cooldown (coin-specific)
â”œâ”€ Multiple losses â†’ Extended cooldown
â””â”€ Daily limit â†’ Stop trading

Zone Memory Update:
â”œâ”€ Update zone statistics
â”œâ”€ Re-entry success rate
â”œâ”€ Overall zone performance
â””â”€ Blacklist if needed

Output: READY FOR NEXT SETUP

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
END OF PA CYCLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4.2 Decision Tree Summary
                    START
                      â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  4H TREND OK?   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              âœ“ YES   âœ— NO
                â†“       â†“
                â†“    SKIP COIN
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ZONE FOUND?    â”‚
            â”‚  Quality >= 4?  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              âœ“ YES   âœ— NO
                â†“       â†“
                â†“    SKIP COIN
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  PRICE IN ZONE? â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              âœ“ YES   âœ— NO
                â†“       â†“
                â†“    MONITOR
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ChoCH FORMED?  â”‚
            â”‚  Strength>=0.4? â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              âœ“ YES   âœ— NO
                â†“       â†“
                â†“    WAIT
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  FIB RETEST?    â”‚
            â”‚  0.705/0.618?   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              âœ“ YES   âœ— NO
                â†“       â†“
                â†“    CANCEL
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  4 GATES PASS?  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              âœ“ YES   âœ— NO
                â†“       â†“
                â†“    REJECT
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  RL APPROVES?   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              âœ“ YES   âœ— NO
                â†“       â†“
                â†“    SKIP
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  EXECUTE TRADE  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ MANAGE TRADE    â”‚
            â”‚ (TP1/TP2/TP3)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ TRADE COMPLETE  â”‚
            â”‚ UPDATE RL       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
            NEXT SETUP

ğŸ”„ 5. RE-ENTRY vs NEW SETUP
5.1 Fark Nedir?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NEW SETUP (Normal Trade)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Characteristics:
â”œâ”€ Fresh zone (never traded before OR cool-off period passed)
â”œâ”€ Normal risk (2%)
â”œâ”€ Full confidence
â”œâ”€ No history on this specific zone
â””â”€ Standard entry rules

Example:
10:00 - Zone A discovered
10:30 - ChoCH + Fib retest
10:35 - ENTRY (First time on Zone A)
       Risk: 2%
       Status: NEW SETUP

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RE-ENTRY (Second Attempt)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Characteristics:
â”œâ”€ Same zone (previously stopped)
â”œâ”€ Reduced risk (1%)
â”œâ”€ Cautious approach
â”œâ”€ History: Previous stop loss
â”œâ”€ Requires NEW ChoCH + NEW Fib retest
â””â”€ Must pass re-entry eligibility checks

Example:
10:00 - Zone A entry (first attempt)
10:30 - Stop loss hit (-2%)
11:00 - Wait 30 minutes (2 candles)
11:30 - New ChoCH forms
11:45 - New Fib retest
11:50 - RE-ENTRY (Second attempt on Zone A)
       Risk: 1% (reduced)
       Status: RE-ENTRY #1

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5.2 Re-entry Flow Chart
        STOP LOSS HIT
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Zone Broken?       â”‚
    â”‚  (Body close past)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         NO â†“    YES â†“
            â†“         â””â†’ ZONE BLACKLISTED
            â†“            (No re-entry ever)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Wait 30 Minutes    â”‚
    â”‚  (2 candles @15M)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  New ChoCH Formed?  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         NO â†“    YES â†“
            â†“         â†“
         WAIT    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  ChoCH Strong?      â”‚
                 â”‚  (>= 0.4)           â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      NO â†“    YES â†“
                         â†“         â†“
                      WAIT    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  New Fib Retest?    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   NO â†“    YES â†“
                                      â†“         â†“
                                   WAIT    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚  Attempts < 2?      â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                NO â†“    YES â†“
                                                   â†“         â†“
                                          ZONE BLACKLIST   â†“
                                          (Max attempts)   â†“
                                                           â†“
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚  RE-ENTRY       â”‚
                                                  â”‚  Risk: 1%       â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š 6. ZONE MEMORY SYSTEM
6.1 Zone Tracking
ZONE_MEMORY = {
    'zone_id': 'BTC_1H_Zone_50000',
    
    'zone_info': {
        'coin': 'BTCUSDT',
        'timeframe': '1H',
        'bottom': 50000,
        'top': 50100,
        'quality': 8,
        'created': '2024-01-15 10:00'
    },
    
    'trade_history': [
        {
            'attempt': 1,
            'date': '2024-01-15 14:30',
            'entry': 50050,
            'stop': 49750,
            'result': 'LOSS',
            'pnl': -2.0,
            'reason': 'False breakout',
            'choch_strength': 0.65,
            'fib_level': 0.705
        },
        {
            'attempt': 2,
            'date': '2024-01-15 16:00',
            'entry': 50045,
            'stop': 49750,
            'result': 'WIN',
            'pnl': +3.2,
            'reason': 'Clean bounce',
            'choch_strength': 0.78,
            'fib_level': 0.618
        }
    ],
    
    'statistics': {
        'total_attempts': 2,
        'wins': 1,
        'losses': 1,
        'win_rate': 0.50,
        'avg_pnl': +0.6,
        'best_pnl': +3.2,
        'worst_pnl': -2.0,
        'avg_choch_strength': 0.715,
        'preferred_fib': '0.618',  # RL learned
        'status': 'ACTIVE'
    },
    
    'rl_analysis': {
        'reliability_score': 7,  # 0-10
        're_entry_recommended': True,
        'optimal_choch_strength': 0.7,
        'optimal_fib_level': 0.618,
        'notes': 'Zone works better on 2nd attempt'
    },
    
    'blacklist_check': {
        'blacklisted': False,
        'reason': None,
        'consecutive_losses': 1,  # Max 3 before blacklist
        'last_update': '2024-01-15 16:00'
    }
}
6.2 Zone Blacklist Conditions
def check_zone_blacklist(zone_memory):
    """
    Zone blacklist edilmeli mi?
    """
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Condition 1: 3 ArdÄ±ÅŸÄ±k KayÄ±p
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    recent_trades = zone_memory['trade_history'][-3:]
    
    if len(recent_trades) == 3:
        if all(t['result'] == 'LOSS' for t in recent_trades):
            return {
                'blacklist': True,
                'reason': '3 consecutive losses',
                'action': 'Permanent blacklist'
            }
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Condition 2: Ã‡ok DÃ¼ÅŸÃ¼k Win Rate
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if zone_memory['statistics']['total_attempts'] >= 5:
        win_rate = zone_memory['statistics']['win_rate']
        
        if win_rate < 0.30:  # %30 altÄ±
            return {
                'blacklist': True,
                'reason': f'Win rate too low: {win_rate:.0%}',
                'action': 'Temporary blacklist (30 days)'
            }
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Condition 3: Negatif Avg PnL
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if zone_memory['statistics']['total_attempts'] >= 5:
        avg_pnl = zone_memory['statistics']['avg_pnl']
        
        if avg_pnl < -1.0:  # Ortalama %1 kayÄ±p
            return {
                'blacklist': True,
                'reason': f'Negative avg PnL: {avg_pnl:.1f}%',
                'action': 'Temporary blacklist (60 days)'
            }
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Condition 4: Zone BozulmuÅŸ
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if zone_memory['zone_info'].get('broken', False):
        return {
            'blacklist': True,
            'reason': 'Zone structure broken',
            'action': 'Permanent blacklist'
        }
    
    return {
        'blacklist': False,
        'reason': 'Zone still valid'
    }

âœ… PARÃ‡A 3 Ã–ZET
Bu parÃ§ada Ã¶ÄŸrendiklerimiz:
1. Re-entry System
	â€¢	âœ… Re-entry koÅŸullarÄ± (6 check)
	â€¢	âœ… 30 dk bekleme sÃ¼resi
	â€¢	âœ… Yeni ChoCH + Fib retest ÅŸartÄ±
	â€¢	âœ… YarÄ± risk (%1)
	â€¢	âœ… Max 2 re-entry per zone
	â€¢	âœ… RL Ã¶ÄŸrenme mekanizmasÄ±
2. Adaptive Parameters
	â€¢	âœ… Volatiliteye gÃ¶re ayarlama
	â€¢	âœ… Timeframe bazlÄ± scaling
	â€¢	âœ… 3 fazlÄ± optimizasyon
	â—¦	Faz 1: Heuristic (0-2 ay)
	â—¦	Faz 2: Grid search (2-6 ay)
	â—¦	Faz 3: RL optimization (6+ ay)
	â€¢	âœ… Coin-specific learning
3. Liquidity Detection
	â€¢	âœ… Wick sweep tespiti
	â€¢	âœ… TP2 iÃ§in kullanÄ±m
	â€¢	âœ… Liquidity vs Zone seÃ§imi
4. Complete PA Flow
	â€¢	âœ… 10 adÄ±mlÄ± tam sÃ¼reÃ§
	â€¢	âœ… Her adÄ±mda karar mekanizmasÄ±
	â€¢	âœ… Decision tree
	â€¢	âœ… Re-entry vs New setup farkÄ±
5. Zone Memory System
	â€¢	âœ… Zone tracking
	â€¢	âœ… Trade history
	â€¢	âœ… RL analysis
	â€¢	âœ… Blacklist conditions

SÄ±rada: PARÃ‡A 4 - RL Architecture & Setup Scoring (RL State/Action/Reward, Setup Quality Score 0-100, Gate System)
Devam edelim mi? ğŸš€
